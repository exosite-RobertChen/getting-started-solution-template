# device2 settings: see http://docs.exosite.com/reference/services/device2 for more information

# Can be modified by user, as whitelisted in the options.safeConfigs in the murano.yaml file.

protocol:
  name: "onep:v1/http"
provisioning:
  auth_type: token

resources:
  temperature:
    format: number
  humidity:
    format: number
  state:
    format: number
    initial: 0
  uptime:
    format: number
  config_applications:
    allowed: []
    format: string
    settable: true
    unit: ''
  config_interfaces:
    allowed: []
    format: string
    settable: true
    unit: ''
  config_io:
    allowed: []
    format: string
    settable: true
    unit: ''
  config_network:
    allowed: []
    format: string
    settable: true
    unit: ''
  config_oem:
    allowed: []
    format: string
    settable: true
    unit: ''
  config_otau:
    allowed: []
    format: string
    settable: true
    unit: ''
  config_rules:
    allowed: []
    format: string
    settable: true
    unit: ''
  data_in:
    allowed: []
    format: string
    settable: true
    unit: ''
  data_out:
    allowed: []
    format: string
    settable: true
    unit: ''
  otau_in:
    allowed: []
    format: string
    settable: true
    unit: ''
  pdaas_reset: # Hard ownership reset
    allowed: []
    format: string
    settable: true
    sync: false
    unit: ''
  pdaas_claim_code: # Dynamic claim code generation
    allowed: []
    format: string
    settable: true
    sync: false
    unit: ''
  pdaas_user_email: # User claim from input enabled device
    allowed: []
    format: string
    settable: true
    sync: false
    unit: ''


# User cannot modify this data
tags_schema:
  description: |
    Find here tags used to manage your Connector-as-a-Service device ownership. Find more information on https://docs.exosite.com/connectivity/pdaas/publisher/ .
  type: object
  properties:
    apps:
      title: Apps
      description: |
        Application Id with granted access to this device data & events.
        Add here a Murano application Id to enable it (You first need to connect this Connector to the application)
        External application starts with the "ext_" prefix.
      type: string
    users:
      title: Users
      description: |
        Device owner email granting access to this device. Once a user uses a 'Claim Code' his email will be added automatically.
        Removing this tag would remove user access to this device, however if 'apps' are still defined the applications will still have access.
      type: string
      format: email
    claim_code:
      title: Claim Code(s)
      description: |
        The code(s) usable to claim ownership of this device. The same claim code can be reused for multiple devices.
      type: string
    expires:
      title: Claim Expiration
      description: Expiration UTC Unix timestamp for the claim code.
      type: string
      pattern: "[0-9]+"
  patternProperties:
    context_[a-zA-Z0-9-_]+:
      type: string
      description: Context data used by this app about this device
